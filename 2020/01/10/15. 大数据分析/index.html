<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="庸人不自扰">


    <meta name="subtitle" content="DPH Blog">


    <meta name="description" content="记录成长的瞬间">



<title>15. 大数据分析 | DPH Blog</title>



    <link rel="icon" href="/myblog.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 4.2.0"></head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">DPH Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">归档</a>
                
                    <a class="menu-item" href="/category">分类</a>
                
                    <a class="menu-item" href="/tag">标签</a>
                
                    <a class="menu-item" href="/about">关于</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>

        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">DPH Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">归档</a>
                
                    <a class="menu-item" href="/category">分类</a>
                
                    <a class="menu-item" href="/tag">标签</a>
                
                    <a class="menu-item" href="/about">关于</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">15. 大数据分析</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">庸人不自扰</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">一月 10, 2020&nbsp;&nbsp;11:36:02</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/other/">其他</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <hr>
<h3 id="SuperMap-iClient-for-Leaflet-对接了-SuperMap-iServer-的分布式分析服务，为用户提供大数据分析功能，主要包括："><a href="#SuperMap-iClient-for-Leaflet-对接了-SuperMap-iServer-的分布式分析服务，为用户提供大数据分析功能，主要包括：" class="headerlink" title="SuperMap iClient for Leaflet 对接了 SuperMap iServer 的分布式分析服务，为用户提供大数据分析功能，主要包括："></a>SuperMap iClient for Leaflet 对接了 SuperMap iServer 的分布式分析服务，为用户提供大数据分析功能，主要包括：</h3><blockquote>
<ul>
<li>密度分析</li>
<li>点聚合分析</li>
<li>单对象空间查询分析</li>
<li>区域汇总分析</li>
<li>矢量裁剪分析</li>
</ul>
</blockquote>
<hr>
<h3 id="密度分析"><a href="#密度分析" class="headerlink" title="密度分析"></a>密度分析</h3><blockquote>
<p>SuperMap iServer 的分布式分析服务中的密度分析包括简单点密度分析和核密度分析两种： </p>
<blockquote>
<p>简单点密度分析：</p>
<p>用于计算每个点的指定邻域形状内的每单位面积量值。计算方法为点的测量值除以指定邻域面积，点的邻域叠加处，其密度值也相加，每个输出栅格的密度均为叠加在栅格上的所有邻域密度值之和。结果栅格值的单位为原数据集单位的平方的倒数，即若原数据集单位为米，则结果栅格值的单位为每平方米； </p>
</blockquote>
<blockquote>
<p>核密度分析：</p>
<p>用于计算点、线要素测量值在指定邻域范围内的单位密度。简单来说，它能直观的反映出离散测量值在连续区域内的分布情况。其结果是中间值大周边值小的光滑曲面，栅格值即为单位密度，在邻域边界处降为0。核密度分析可用于计算人口密度、建筑密度、获取犯罪情况报告、旅游区人口密度监测、连锁店经营情况分析等等。 </p>
</blockquote>
</blockquote>
<p>下面对大数据进行简单点密度分析，网格面类型为四边形网格。其接口使用方法如下：</p>
<p>设置密度分析参数 kernelDensityJobParam，包括数据集、分析方法、分析类型、格网大小等。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 密度分析参数</span></span><br><span class="line"><span class="keyword">var</span> kernelDensityJobParam = <span class="keyword">new</span> SuperMap.KernelDensityJobParameter(&#123;</span><br><span class="line">		<span class="comment">// 数据集名</span></span><br><span class="line">		datasetName: <span class="string">"newyork_taxi_2013_01_14k_csv_newyork_taxi_2013-01_14k"</span>,</span><br><span class="line">		<span class="comment">// 网格大小,对于四边形网格为网格的边长;对于六边形网格为六边形顶点到中心点的距离</span></span><br><span class="line">		resolution: <span class="number">80</span>,</span><br><span class="line">		<span class="comment">// 分析方法, 指定分析方法为简单点密度分析,还是核密度分析。0表示前者,1表示后者</span></span><br><span class="line">		method:<span class="number">0</span>,</span><br><span class="line">		<span class="comment">// 格网面类型, 指定网格单元为四边形网格,还是六边形网格。0表示前者,1表示后者</span></span><br><span class="line">		meshType:<span class="number">0</span>,</span><br><span class="line">		<span class="comment">// 指定待分析的点的权重值所在的字段索引列号集合，字段索引从0开始。格式如:col7,col8</span></span><br><span class="line">		fields: col7,col8,</span><br><span class="line">		query: Bounds, 												<span class="comment">// 分析范围</span></span><br><span class="line">		radius: <span class="number">300</span>, 												<span class="comment">// 分析的影响半径</span></span><br><span class="line">		meshSizeUnit: Meter, 										<span class="comment">// 网格大小单位</span></span><br><span class="line">		radiusUnit: Meter, 											<span class="comment">// 搜索半径单位</span></span><br><span class="line">		areaUnit: SquareMile, 										<span class="comment">// 面积单位</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>向服务端提交密度分析的请求，获取服务端成功处理并返回的密度分析结果。 </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建密度分析实例</span></span><br><span class="line"><span class="keyword">var</span> processingUrl =<span class="string">"https://iserver.supermap.io/iserver/services/spatialprocessing/rest/v1/jobs"</span>;</span><br><span class="line"><span class="keyword">var</span> processingService = <span class="keyword">new</span> L.supermap.processingService(processingUrl);</span><br><span class="line"><span class="comment">// 向服务器发送请求进行密度分析服务，并获取返回的数据</span></span><br><span class="line">processingService.addKernelDensityJob(kernelDensityJobParams, <span class="function"><span class="keyword">function</span> (<span class="params">serviceResult</span>) </span>&#123;</span><br><span class="line">		<span class="comment">// 获取服务端返回的数据</span></span><br><span class="line">		<span class="keyword">var</span> result = serviceResult.result;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>运行效果：</p>
<img src="/2020/01/10/15.%20%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/1.png" class=""> 

<hr>
<h3 id="点聚合分析-注释1"><a href="#点聚合分析-注释1" class="headerlink" title="点聚合分析^注释1"></a>点聚合分析<a href="点聚合分析，是指针对点数据集制作聚合图的一种空间分析作业。通过网格面或多边形对地图点要素进行划分，然后计算每个面对象内点要素的数量，并作为面对象的统计值，也可以引入点的权重信息，考虑面对象内点的加权值作为面对象的统计值；最后基于面对象的统计值，按照统计值大小排序的结果，通过色带对面对象进行色彩填充。">^注释1</a></h3><blockquote>
<p>目前支持的点聚合分析类型包括：<code>网格面聚合</code>和<code>多边形聚合</code>，其中网格面聚合图按照网格类型又可分为四边形网格和六边形网格。 </p>
</blockquote>
<p>下面进行点聚合分析，其中聚合类型为网格面聚合，网格面类型为四边形网格。其接口使用方法如下：</p>
<p>设置点聚合分析参数 summaryMeshJobParam，包括数据集、聚合类型、统计模式、格网大小等。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点聚合分析参数</span></span><br><span class="line"><span class="keyword">var</span> summaryMeshJobParam = <span class="keyword">new</span> SuperMap.SummaryMeshJobParameter(&#123;</span><br><span class="line">		<span class="comment">// 数据集名</span></span><br><span class="line">		datasetName: <span class="string">"newyork_taxi_2013_01_14k_csv_newyork_taxi_2013-01_14k"</span>,</span><br><span class="line">		<span class="comment">// 网格大小,对于四边形网格为网格的边长;对于六边形网格为六边形顶点到中心点的距离</span></span><br><span class="line">		resolution: <span class="number">80</span>,</span><br><span class="line">		<span class="comment">// 网格面类型, 指定网格单元为四边形网格,还是六边形网格。0表示前者,1表示后者</span></span><br><span class="line">		meshType:<span class="number">0</span>,</span><br><span class="line">		<span class="comment">// 指定待分析的点的权重值所在的字段索引列号集合，字段索引从0开始。格式如:col7,col8</span></span><br><span class="line">		fields: col7,</span><br><span class="line">		query: Bounds, 									<span class="comment">// 分析范围</span></span><br><span class="line">		statisticModes:, 								<span class="comment">// 统计模式, 需与“权重值字段”个数保持一致</span></span><br><span class="line">		type:SummaryType, 								<span class="comment">// 聚合类型, 指定聚合类型为网格面聚合,还是多边形聚合。</span></span><br><span class="line">		regionDataset: <span class="string">'regionDataset'</span> 					<span class="comment">// 聚合面数据集, 在多边形聚合时使用</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>向服务端提交点聚合分析的请求，待服务端成功处理并返回点聚合分析结果后对其进行解析处理。 </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建点聚合分析实例</span></span><br><span class="line"><span class="keyword">var</span> processingUrl =<span class="string">"https://iserver.supermap.io/iserver/services/spatialprocessing/rest/v1/jobs"</span>;</span><br><span class="line"><span class="keyword">var</span> processingService = <span class="keyword">new</span> L.supermap.processingService(processingUrl);</span><br><span class="line"><span class="comment">// 向服务器发送请求进行点聚合分析服务，并获取返回的结果</span></span><br><span class="line">processingService.addSummaryMeshJob(summaryMeshJobParam,<span class="function"><span class="keyword">function</span>(<span class="params">serviceResult</span>)</span>&#123;</span><br><span class="line">		<span class="comment">// 获取服务端返回的数据</span></span><br><span class="line">		<span class="keyword">var</span> result = serviceResult.result;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>运行效果：</p>
<img src="/2020/01/10/15.%20%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/2.png" class=""> 

<hr>
<h3 id="单对象空间查询分析-注释2"><a href="#单对象空间查询分析-注释2" class="headerlink" title="单对象空间查询分析^注释2"></a>单对象空间查询分析<a href="空间查询是通过几何对象之间的空间位置关系来构建过滤条件的一种查询方式。例如：通过空间查询可以找到被包含在面中的空间对象，相离或者相邻的空间对象等。">^注释2</a></h3><blockquote>
<p>SuperMap iServer 的分布式分析服务中的单对象空间查询，是指只支持查询对象数据集中的一个对象对被查询数据集做空间查询。如果查询对象数据集中有多个对象，则默认用 <code>SmID</code> 最小的对象对被查询数据集做空间查询。 </p>
</blockquote>
<p>下面进行单对象空间查询分析，其中空间查询模式使用“相交”。其接口使用方法如下：</p>
<p>设置单对象空间查询分析参数 singleObjectQueryJobsParam，包括源数据集、查询对象数据集、空间查询模式。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单对象空间查询分析参数</span></span><br><span class="line"><span class="keyword">var</span> singleObjectQueryJobsParam = <span class="keyword">new</span> SuperMap.SingleObjectQueryJobsParameter(&#123;</span><br><span class="line">		datasetName: <span class="string">'ProcessingData_processing_newyorkZone_R'</span>, 		<span class="comment">// 数据集名</span></span><br><span class="line">		datasetQuery: <span class="string">'ProcessingData_processing_singleRegion_R'</span>, 		<span class="comment">// 查询对象所在数据集名称</span></span><br><span class="line">		mode:<span class="string">'INTERSECT'</span> 												<span class="comment">// 空间查询模式</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>向服务端提交单对象空间查询分析的请求，待服务端成功处理并返回单对象空间查询分析结果后对其进行解析处理。 </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建单对象空间查询分析实例</span></span><br><span class="line"><span class="keyword">var</span> processingUrl =<span class="string">"https://iserver.supermap.io/iserver/services/spatialprocessing/rest/v1/jobs"</span>;</span><br><span class="line"><span class="keyword">var</span> processingService = <span class="keyword">new</span> L.supermap.processingService(processingUrl);</span><br><span class="line"><span class="comment">// 向服务器发送请求进行单对象空间查询分析服务，并对返回结果进行处理展现在地图上</span></span><br><span class="line">processingService.addQueryJob(singleObjectQueryJobsParam,<span class="function"><span class="keyword">function</span>(<span class="params">serviceResult</span>)</span>&#123;</span><br><span class="line">		<span class="comment">// 获取服务端返回的数据</span></span><br><span class="line">		<span class="keyword">var</span> result = serviceResult.result;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>运行效果：</p>
<img src="/2020/01/10/15.%20%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/3.png" class=""> 

<hr>
<h3 id="区域汇总分析-注释3"><a href="#区域汇总分析-注释3" class="headerlink" title="区域汇总分析^注释3"></a>区域汇总分析<a href="区域汇总分析，是指针对线数据集和面数据集制作聚合图的一种空间分析作业。指通过网格面或多边形对地图线或面要素进行划分，然后，以标准属性字段或权重字段对每个网格单元内线或面要素进行统计，将统计结果作为该网格单元的统计值。最后按照网格单元统计值的大小进行排序，通过色带对网格单元进行色彩填充。">^注释3</a></h3><blockquote>
<p>区域汇总分析的概念与点聚合分析的概念类似，不同的是点聚合分析是对点数据集进行统计计算，而区域汇总分析是对线数据集和面数据集进行统计计算。在区域汇总分析的概念里，网格单元的统计值有两种统计方式，以标准属性字段统计和以权重字段统计。 </p>
</blockquote>
<p>下面进行区域汇总分析，其中汇总类型为网格面汇总，网格面类型为四边形网格。其接口使用方法如下：</p>
<p>设置区域汇总分析参数 <code>summaryRegionJobParam</code>，包括数据集、汇总类型、网格面汇总类型等。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 区域汇总分析参数</span></span><br><span class="line"><span class="keyword">var</span> summaryRegionJobParam = <span class="keyword">new</span> SuperMap.SummaryRegionJobParameter(&#123;</span><br><span class="line">		datasetName: <span class="string">'ProcessingData_processing_newyorkZone_R'</span>, <span class="comment">// 数据集名</span></span><br><span class="line">		<span class="comment">// 聚合面数据集, 在多边形聚合时使用</span></span><br><span class="line">		regionDataset: <span class="string">'regionDataset'</span>,</span><br><span class="line">		<span class="comment">// 汇总类型,包括网格面汇总和多边形汇总两种类型</span></span><br><span class="line">		type: SummaryType,</span><br><span class="line">		<span class="comment">// 网格面类型, 指定网格单元为四边形网格,还是六边形网格。0表示前者,1表示后者</span></span><br><span class="line">		meshType:<span class="number">0</span>,</span><br><span class="line">		query: Bounds, 								<span class="comment">// 分析范围</span></span><br><span class="line">		standardSummaryFields: <span class="literal">true</span>, 				<span class="comment">// 是否以标准属字段统计</span></span><br><span class="line">		<span class="comment">// 当以标准属字段统计时，标准属字段统计的统计模式</span></span><br><span class="line">		standardStatisticModes: StatisticAnalystMode,</span><br><span class="line">		<span class="comment">// 当以标准属字段统计时，标准属字段统计的字段名称</span></span><br><span class="line">		standardFields: <span class="string">"LocationID"</span>,</span><br><span class="line">		weightedFields:<span class="literal">false</span>,<span class="comment">// 是否以权重字段统计</span></span><br><span class="line">		<span class="comment">// 使用权重字段统计模式，权重字段统计的统计模式</span></span><br><span class="line">		weightedStatisticModes: <span class="string">""</span>,</span><br><span class="line">		<span class="comment">// 使用权重字段统计模式时，权重字段统计的字段名称</span></span><br><span class="line">		weightedSummaryFields: <span class="string">""</span>,</span><br><span class="line">		<span class="comment">// 网格大小,对于四边形网格为网格的边长;对于六边形网格为六边形顶点到中心点的距离</span></span><br><span class="line">		resolution:<span class="number">100</span>,</span><br><span class="line">		meshSizeUnit: Meter, 						<span class="comment">// 网格大小单位</span></span><br><span class="line">		sumShape:<span class="literal">true</span> 								<span class="comment">// 是否统计长度或面积</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>向服务端提交区域汇总分析的请求，待服务端成功处理并返回区域汇总分析结果后对其进行解析处理。 </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建区域汇总分析实例</span></span><br><span class="line"><span class="keyword">var</span> processingUrl =<span class="string">"https://iserver.supermap.io/iserver/services/spatialprocessing/rest/v1/jobs"</span>;</span><br><span class="line"><span class="keyword">var</span> processingService = <span class="keyword">new</span> L.supermap.processingService(processingUrl);</span><br><span class="line"><span class="comment">// 向服务器发送请求进行区域汇总分析服务，并获取返回的结果</span></span><br><span class="line">processingService.addSummaryRegionJob(summaryRegionJobParam,<span class="function"><span class="keyword">function</span>(<span class="params">serviceResult</span>)</span>&#123;</span><br><span class="line">		<span class="comment">// 获取服务端返回的数据</span></span><br><span class="line">		<span class="keyword">var</span> result = serviceResult.result;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>运行效果：</p>
<img src="/2020/01/10/15.%20%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/4.png" class=""> 

<hr>
<h3 id="矢量裁剪分析-注释4"><a href="#矢量裁剪分析-注释4" class="headerlink" title="矢量裁剪分析^注释4"></a>矢量裁剪分析<a href="矢量裁剪分析为对矢量数据集进行裁剪。包括内部裁剪和外部裁剪。内部裁剪指被裁剪的矢量数据集在裁剪区范围内的部分被保留到结果数据集中；相反，使用外部裁剪，则保留不在裁剪区范围内的那部分数据到结果数据集中。">^注释4</a></h3><blockquote>
<p>SuperMap iServer 的分布式分析服务中的矢量裁剪分析，只支持裁剪对象数据集中的一个对象对源数据集做矢量裁剪。如果裁剪数据集中有多个对象，则默认用 <code>SmID</code> 最小的对象对源数据集做矢量裁剪。 </p>
</blockquote>
<p>下面进行矢量裁剪分析，裁剪矢量分析模式使用内部裁剪。其接口使用方法如下：</p>
<p>设置矢量裁剪分析参数 vectorClipJobsParam，包括源数据、裁剪对象数据集、裁剪分析模式。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 矢量裁剪分析参数</span></span><br><span class="line"><span class="keyword">var</span> vectorClipJobsParam = <span class="keyword">new</span> SuperMap.VectorClipJobsParameter(&#123;</span><br><span class="line">		datasetName: <span class="string">'ProcessingData_newyork_taxi_2013-01_14k'</span>, 	<span class="comment">// 数据集名</span></span><br><span class="line">		datasetOverlay: <span class="string">'ProcessingData_processing_singleRegion_R'</span>, <span class="comment">// 裁剪对象所在数据集名称</span></span><br><span class="line">		mode:ClipAnalystMode 										<span class="comment">// 裁剪分析模式</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>向服务端提交矢量裁剪分析的请求，待服务端成功处理并返回矢量裁剪分析结果后对其进行解析处理。 </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建矢量裁剪分析实例</span></span><br><span class="line"><span class="keyword">var</span> processingUrl =<span class="string">"https://iserver.supermap.io/iserver/services/spatialprocessing/rest/v1/jobs"</span>;</span><br><span class="line"><span class="keyword">var</span> processingService = <span class="keyword">new</span> L.supermap.processingService(processingUrl);</span><br><span class="line"><span class="comment">//向服务器发送请求进行矢量裁剪分析服务，并对返回结果进行处理展现在地图上</span></span><br><span class="line">processingService.addVectorClipJob(vectorClipJobsParam, <span class="function"><span class="keyword">function</span>(<span class="params">serviceResult</span>)</span>&#123;</span><br><span class="line">		<span class="comment">// 获取服务端返回的数据</span></span><br><span class="line">		<span class="keyword">var</span> result = serviceResult.result;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>运行效果：</p>
<img src="/2020/01/10/15.%20%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/5.png" class=""> 

<hr>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><blockquote>
</blockquote>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>庸人不自扰</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="http://yoursite.com/2020/01/10/15.%20%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/">http://yoursite.com/2020/01/10/15.%20%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2020 LICENSE</span>
                    </p>
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>天行健，君子以自强不息</span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/SuperMap/"># SuperMap</a>
                    
                        <a href="/tags/%E5%89%8D%E7%AB%AF/"># 前端</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2020/01/10/16.%20%E6%95%B0%E6%8D%AE%E6%B5%81/">16. 数据流</a>
            
            
            <a class="next" rel="next" href="/2020/01/10/14.%20%E5%9C%B0%E5%9D%80%E5%8C%B9%E9%85%8D/">14. 地址匹配</a>
            
        </section>


    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>© 庸人不自扰 | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>        
</footer>

<script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?61def953aa124497ee616cdacabb1116";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
</script>
    </div>
</body>
</html>
